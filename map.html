<!DOCTYPE html>
<head>
	<script>
		var script = document.createElement('script');
		script.src = "js/" + location.search.slice(1) + ".js";
		document.head.appendChild(script);
	</script>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>
	<link rel="stylesheet" href="css/css.css"/>
</head>
<body>
	<div id="mapid">
	</div>
<script language="javascript">
function printPage() {
  var content = document.getElementById("mapid").innerHTML;
  var css = "", i, j, c = document.getElementById("mapid").cloneNode(true);
  for (i = 0; i < c.childNodes.length; i++) {
    if (c.childNodes[i].nodeType == 1 && (c.childNodes[i].getAttribute("id") == "mainLeaderboard" || c.childNodes[i].getAttribute("id") == "midcontentadcontainer")) {
      c.removeChild(c.childNodes[i]);
      content = c.innerHTML;
    }
  }
  var head = document.getElementsByTagName("head")[0].innerHTML;
  var myWindow = window.document.write("<body onload='window.print()'</body><head>"+head+"</head><button onclick='window.print()'>a</button>"+content+"</body>");
  window.print();
location.reload();
}
</script>
<script>
	var mymap = L.map('mapid').setView([48.152, -1.77], 15);
	L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiYXF1YWJ4IiwiYSI6ImNqeWszMHQzeTA5aGwzaHBtaWR2bWZpd2oifQ.ik62iG1BWqL7xrdVJb2eBA', {
		minZoom: 15,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox.streets'
	}).addTo(mymap); 

	var info = L.control();
	info.onAdd = function (mymap) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	};

	info.update = function (props) {
		this._div.innerHTML = (props ? '<b>Secteur ' + props.secteur + '</b><br />' + props.habitations: 'Cliquez sur un secteur');
	};

	info.addTo(mymap);

	
	L.Control.Watermark = L.Control.extend({
    onAdd: function(mymap) {
        var img = L.DomUtil.create('img');
		img.onclick = function(){printPage();return false;};
        img.src = 'print.png';
        img.style = 'width: 23px;height: 23px;padding:3.5px;border: 2px solid rgba(0,0,0,0.2);background-clip: padding-box;border-radius: 4px;background-color:#fff;float:bottom;position:absolute;';
        return img;
    },
    onRemove: function(mymap) {
        // Nothing to do here
    }
});


L.control.watermark = function(opts) {
    return new L.Control.Watermark(opts);
}

L.control.watermark({ position: 'topleft' }).addTo(mymap);
	
	var geojson;

	function zoomToFeature(e) {
		mymap.fitBounds(e.target.getBounds());
		var layer = e.target;
		info.update(layer.feature.properties);
	}

	function onEachFeature(feature, layer) {
		layer.on({
			click : zoomToFeature,
		});
	}
	

	
	geojson = L.geoJson(data, {
		onEachFeature: onEachFeature,
		style: function (feature) {
        return {color: 'red',
		fillOpacity: 0,
		opacity: 0.6,
		weight: 6,
	}}}).addTo(mymap);
</script>
</body>